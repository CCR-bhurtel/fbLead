(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(3298)}])},6207:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.84dd46a7.png",height:40,width:156,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAG1BMVEUkg8UjhMJpl6IcfsEzmcwff7+Di38ZfcZHhKc1/KZ/AAAACXRSTlM2RWBhBSBAUU9ap+PwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGklEQVR4nGNg4GBjYGBkZWFgZ2JiZmRmZAAAAccALJ5Yx3YAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},6842:function(e,t){"use strict";t.Z={src:"/_next/static/media/plus.7fc0f257.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAElBMVEUOd74NdrwOd71MaXENdrwOdrw39OMmAAAABnRSTlObOScARqWITBOFAAAACXBIWXMAAXcAAAF3AAHmAuEvAAAAK0lEQVR4nEWLWQoAIBCFfMvc/8pRUP0JKhGAgsaJR+C0MZBCs0En+erFd18Q+wB35E2VmAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},9745:function(e,t){"use strict";t.Z={src:"/_next/static/media/search.06564532.png",height:30,width:30,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAMFBMVEVMaXEXZ/8YZv8VbP8YZv8ZZf8aZP8YZ/8XZ/8YZv8YZv8YaP8YaP4YZv8Zaf4ZZv9O4rFQAAAAEHRSTlMAzWwGQy0ZiFin357CtvZOK9EU9gAAAAlwSFlzAAALEwAACxMBAJqcGAAAADZJREFUeJwdykkOwCAMALHJHkro/5+LhM8GFRkHVBL/AiYwtGASozfswlgNKUvPH4Bp+dtPnwsjAwEGpoVYsQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},7557:function(e,t,r){"use strict";var n=r(5893),o=r(7294),a=r(1195);t.Z=function(e){var t=e.children,r=e.handleClose,l=e.modalOpen;return(0,o.useEffect)(function(){var e=document.querySelector("body");return e.style.overflow="hidden",function(){e.style.overflow="initial"}},[]),(0,n.jsx)(a.Z,{open:l,onClose:r,children:(0,n.jsx)("div",{className:"w-[100vw] relative z-50",children:(0,n.jsx)("div",{className:"absolute top-[15rem] left-[35%]",children:t})})})}},3298:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(1309),o=r(5893),a=r(7294),l=r(8506);r(3294);var s=r(1163),i=r(6154),c=r(6207),d=r(6842),m=r(9745),u=r(7557),f=r(6501),x=function(e){var t=e.form,r=e.deleteFromLocal,l=(0,n._)((0,a.useState)(!1),2),s=l[0],c=l[1],d=(0,n._)((0,a.useState)(!1),2),m=d[0],x=d[1],h=function(){c(!1)};return(0,o.jsxs)(o.Fragment,{children:[s&&(0,o.jsx)(u.Z,{modalOpen:s,handleClose:h,children:(0,o.jsxs)("div",{className:"bg-white p-4 rounded-md min-h-[4rem] min-w-[10rem] flex flex-col items-center justify-center ",children:[(0,o.jsx)("h2",{className:"font-semibold text-xl",children:" Are you sure, you want to delete this form?"}),(0,o.jsxs)("div",{className:"buttons flex items-center flex-row justify-between mt-4",children:[(0,o.jsx)("button",{onClick:function(){var e=localStorage.getItem("token");x(!0),i.Z.delete("/api/form/".concat(t._id),{headers:{"x-auth-token":e}}).then(function(e){x(!1),f.Am.success("Form deleted successfully"),r(t._id),h()}).catch(function(e){var t;x(!1),f.Am.error((null===(t=e.response)||void 0===t?void 0:t.data.message)||"Error deleting form")})},className:"rounded-md bg-red-500 color-white p-2 hover:border-2 hover:border-red-500 hover:text-red-500 hover:bg-transparent text-white",children:m?"Deleting":"Delete"}),(0,o.jsx)("button",{onClick:h,className:"rounded-md ml-4 bg-blue-500 color-white p-2 hover:border-2 hover:border-blue-500 hover:text-blue-500 hover:bg-transparent text-white",children:"cancel"})]})]})}),(0,o.jsxs)("tr",{className:"min-w-[100%] mt-2",children:[(0,o.jsx)("td",{className:"text-center",children:t.formId}),(0,o.jsx)("td",{className:"text-center",children:t.formName}),(0,o.jsx)("td",{className:"text-center",children:"active"}),(0,o.jsx)("td",{className:"text-center",children:(0,o.jsx)("button",{onClick:function(){c(!0)},className:"bg-red-600 text-white rounded-xl p-2 w-[6rem] hover:border-2 hover:bg-transparent hover:border-red-600 hover:text-red-600",children:"Elimina"})})]})]})},h=function(e){var t=e.forms,r=e.deleteForm;return(0,o.jsx)("div",{className:"p-4 mx-[3rem]",children:(0,o.jsxs)("table",{className:"table-auto w-[100%]",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"headItem text-bold text-blue-500",children:"Id"}),(0,o.jsx)("th",{className:"headItem text-bold text-blue-500",children:"Name"}),(0,o.jsx)("th",{className:"headItem text-bold text-blue-500",children:"Status"}),(0,o.jsx)("th",{className:"headItem text-bold text-blue-500",children:"Form Action"})]})}),(0,o.jsx)("tbody",{className:"overflow-scroll",children:t.map(function(e){return(0,o.jsx)(x,{deleteFromLocal:r,form:e},e.formId)})})]})})},A=r(5766),b=r(2253),p=r(4932),g=r(7632);(0,g.Z)();var v=function(e){var t=e.addLocalForm,r=e.handleClose,l=(0,n._)((0,a.useState)([]),2),s=l[0],c=l[1],m=(0,n._)((0,a.useState)({formName:"",formId:""}),2),u=m[0],x=m[1],h=(0,n._)((0,a.useState)(!1),2),v=h[0],j=h[1],N=(0,n._)((0,a.useState)([]),2),w=N[0],k=N[1],F=["Nome","Cognome","Email","Phone"],y=["Nome","Cognome","Email","Phone","Citt\xe0 di Partenza","Tipi di Camera","Periodo Soggiorno","Note Richiesta"],C=function(){var e=localStorage.getItem("token");i.Z.get("/api/form/fields?formId=".concat(u.formId),{headers:{"x-auth-token":e}}).then(function(e){x((0,p._)((0,b._)({},u),{formName:e.data.formName})),k(e.data.fields),j(!0)}).catch(function(e){var t;console.log(null===(t=e.response)||void 0===t?void 0:t.data.message),j(!1)})},Z=function(e){x((0,p._)((0,b._)({},u),(0,A._)({},e.target.name,e.target.value)))},E=function(e){c(s.concat({id:(0,g.Z)(),facebookField:w[0].key,ninoxField:"Nome",tableType:e}))},S=function(e){c(s.filter(function(t){return t.id!==e}))},_=function(e,t){c(s.map(function(r){return r.id==t?(0,p._)((0,b._)({},r),(0,A._)({},e.target.name,e.target.value)):r}))};return(0,a.useEffect)(function(){C()},[u.formId]),(0,o.jsxs)("div",{className:"bg-white absolute min-w-[30rem] min-h-[10rem] max-h-[30rem] overflow-y-scroll rounded-xl p-4 ",children:[(0,o.jsx)("h1",{className:"font-semibold text-xl text-center",children:"Add new form"}),(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=localStorage.getItem("token");if(v)i.Z.post("/api/form",(0,p._)((0,b._)({},u),{formFields:s}),{headers:{"x-auth-token":n,"Content-Type":"application/json"}}).then(function(e){t(e.data.form),f.Am.success("Form added successfully"),r()}).catch(function(e){var t;f.Am.error((null===(t=e.response)||void 0===t?void 0:t.data.message)||"Error adding new form")});else{f.Am.error("Form is not verified");return}},className:"w-100 flex flex-col items-center justify-center",children:[(0,o.jsx)("input",{type:"text",name:"formId",onChange:Z,value:u.formId,placeholder:"Form id",required:!0,className:"outline-0 border-[0.5px] mt-4 border-gray-400 rounded-md focus:border rounde-md focus:border-blue-300 w-[90%] p-[10px]"}),(0,o.jsx)("input",{type:"text",name:"formName",onChange:Z,value:u.formName,placeholder:"Form name",required:!0,className:"outline-0 border-[0.5px] mt-4 border-gray-400 focus:border rounded-md focus:border-blue-300 w-[90%] p-[10px]"}),v&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"ml-2 text-green-500",children:"Form Verified"}),(0,o.jsxs)("div",{className:"fieldSection flex items-center flex-col justify-center",children:[(0,o.jsx)("p",{className:"mt-2 font-medium",children:"Form fields for Anagrafiche"}),s.map(function(e){if("basics"===e.tableType)return(0,o.jsxs)("div",{className:"w-[90%] flex flex-row mt-4 items-center justify-between",children:[(0,o.jsxs)("select",{type:"text",value:e.ninoxField,name:"ninoxField",placeholder:"Ninox field",required:!0,onChange:function(t){return _(t,e.id)},className:"outline-0 border-[0.5px]  border-gray-400 focus:border rounded-md focus:border-blue-300  p-[10px]",children:[(0,o.jsx)("option",{disabled:!0,className:"text-black",children:"Select Anagrafiche fields"}),F.map(function(e){return(0,o.jsx)("option",{value:e,children:e},e)})]}),(0,o.jsxs)("select",{type:"text",value:e.facebookField,name:"facebookField",placeholder:"Facebook field",required:!0,onChange:function(t){return _(t,e.id)},className:"outline-0 border-[0.5px] ml-2 border-gray-400 text-black rounded-md focus:border rounde-md focus:border-blue-300  p-[10px] max-w-[12rem]",children:[(0,o.jsx)("option",{disabled:!0,className:"text-black",children:"Select facebook field"}),w.map(function(e){return(0,o.jsx)("option",{value:e.key,children:e.label},e.key)})]}),(0,o.jsx)("div",{onClick:function(){S(e.id)},className:"minus text-5xl mx-3 cursor-pointer text-red-500",children:"-"})]},e.formId)}),(0,o.jsx)("img",{onClick:function(){return E("basics")},src:d.Z.src,alt:"",className:"cursor-pointer w-[2rem]"})]}),(0,o.jsxs)("div",{className:"fieldSection flex items-center flex-col justify-center mt-4",children:[(0,o.jsx)("p",{className:"mt-2 font-medium",children:"Form fields for PR FB"}),s.map(function(e){if("prFb"===e.tableType)return(0,o.jsxs)("div",{className:"w-[90%] flex flex-row mt-4 items-center justify-between",children:[(0,o.jsxs)("select",{type:"text",value:e.ninoxField,name:"ninoxField",placeholder:"Ninox field",required:!0,onChange:function(t){return _(t,e.id)},className:"outline-0 border-[0.5px]  border-gray-400 focus:border rounded-md focus:border-blue-300  p-[10px]",children:[(0,o.jsx)("option",{disabled:!0,className:"text-black",children:"Select Pr Fb field"}),y.map(function(e){return(0,o.jsx)("option",{value:e,children:e},e)})]}),(0,o.jsxs)("select",{type:"text",value:e.facebookField,name:"facebookField",placeholder:"Facebook field",required:!0,onChange:function(t){return _(t,e.id)},className:"outline-0 border-[0.5px] ml-2 border-gray-400 text-black rounded-md focus:border rounde-md focus:border-blue-300  p-[10px] max-w-[12rem]",children:[(0,o.jsx)("option",{disabled:!0,className:"text-black",children:"Select facebook field"}),w.map(function(e){return(0,o.jsx)("option",{value:e.key,children:e.label},e.key)})]}),(0,o.jsx)("div",{onClick:function(){S(e.id)},className:"minus text-5xl mx-3 cursor-pointer text-red-500",children:"-"})]},e.formId)}),(0,o.jsx)("img",{onClick:function(){return E("prFb")},src:d.Z.src,alt:"",className:"cursor-pointer w-[2rem]"})]})]}),(0,o.jsx)("button",{className:"bg-blue-600 mt-4 text-white w-[5rem] p-3 rounded-md hover:bg-transparent hover:border-[1px] hover:border-blue-600 hover:text-blue-600",children:"Add"})]})]})};function j(){var e=(0,a.useContext)(l.Vo),t=e.state;e.dispatch;var r=(0,n._)((0,a.useState)(!1),2),x=r[0],A=r[1],b=function(){A(!1)},p=(0,n._)((0,a.useState)([]),2),g=p[0],j=p[1],N=function(){var e=localStorage.getItem("token");i.Z.get("/api/form",{headers:{"x-auth-token":e}}).then(function(e){j(e.data.forms)}).then(function(e){console.log(e)})},w=(0,s.useRouter)();return(0,a.useEffect)(function(){t.isLoggedIn||w.push("login"),N()},[t.isLoggedIn,w]),(0,o.jsxs)("div",{className:"container min-w-screen min-h-screen flex items-center  flex-col",children:[x&&(0,o.jsx)(u.Z,{handleClose:b,modalOpen:x,children:(0,o.jsx)(v,{addLocalForm:function(e){j(g.concat(e))},handleClose:b})}),(0,o.jsx)(f.x7,{}),(0,o.jsx)("img",{src:c.Z.src,alt:"infologo",className:"w-[120px] mt-[4rem]"}),(0,o.jsx)("div",{className:"tableContainer mt-[6rem] mb-[2rem]",children:(0,o.jsxs)("div",{className:"tableWrapper min-w-[60vw] border-[1px] border-blue-400 min-h-[30rem] rounded-xl relative flex flex-col",children:[(0,o.jsxs)("div",{className:"inputContainer relative",children:[(0,o.jsx)("div",{className:"search ",children:(0,o.jsx)("img",{src:m.Z.src,className:"w-[20px] absolute left-2 top-3",alt:""})}),(0,o.jsx)("div",{className:"plus cursor-pointer",onClick:function(){A(!0)},children:(0,o.jsx)("img",{src:d.Z.src,alt:"",className:"w-[20px] absolute right-2 top-3"})}),(0,o.jsx)("input",{type:"text",onChange:function(e){var t=localStorage.getItem("token");i.Z.get("/api/form/search?search=".concat(e.target.value),{headers:{"x-auth-token":t}}).then(function(e){j(e.data.forms)}).catch(function(e){console.log(e)})},placeholder:"Search by Form name",className:"min-w-[100%] rounded-tl-xl rounded-tr-xl h-[3rem] outline-0 px-[4rem] text-bold placeholder:text-gray-300 text-gray-500",style:{background:"#F6F6F6"}})]}),(0,o.jsx)("div",{className:"mt-[1rem] flex-grow m-[2px] rounded-bl-xl rounded-br-xl ",style:{background:"#F6F6F6"},children:(0,o.jsx)(h,{deleteForm:function(e){j(g.filter(function(t){return t._id!==e}))},forms:g})})]})})]})}}},function(e){e.O(0,[564,367,774,888,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);